@use 'sass:map';
@use 'sass:list';

.benefits {
  @include flexBox($justify: center);
  @include section($color: light-grey, $paddingY: 6.25em, $paddingX: 15.6875em);

  &__wrapper {
    @include flexBox($gap: 2.5rem, $direction: column);

    @for $i from 1 through length($colorsPalette) {
      &__box:nth-child(#{$i}) {
        .benefits__image::before,
        .benefits__text::after {
          background-color: nth($colorsPalette, $i);
        }

        // trumpet section
        @if $i == 3 {
          @include flexBox($gap: 3.75rem);

          & > div {
            margin-bottom: 0;
            //max-width: 620px;
          }

          // first column
          & > div:nth-child(1) {
            //max-width: 620px;

            .benefits__text {
              margin: 70px 35px;
            }
          }
        }
      }

      // macbook section
      @if $i == 1 {
        &__box:nth-child(#{$i}) {
          .benefits__image {
            margin-bottom: 38px;
            margin-right: 117px;

            img {
              height: auto;
              width: 386px;
            }

            &::before {
              @include bgImage($size: 180px, $radius: 40px, $top: -40px, $right: 0, $rotate: 45);
            }
          }
        }
      }

      //iphone section
      @if $i == 2 {
        &__box:nth-child(#{$i}) {
          flex-direction: row-reverse;

          .benefits__text {
            margin: 70px 20px 70px 0;
          }

          .benefits__image {
            margin-bottom: 20px;
            margin-left: 50px;

            img {
              height: auto;
              width: 426px;
            }

            &::before {
              @include bgImage($size: 320px, $radius: 50%, $left: -20px, $top: 0);
            }
          }
        }
      }

      .single-image {
        background-color: nth($colorsPalette, $i);
        @include flexBox($align: center, $justify: center, $grow: 1);
        border: none;

        img {
          height: auto;
          margin-top: 55px;
          width: 295px;
        }
      }
    }
  }

  &__box-one-column {
    @include flexBox($align: end, $wrap: nowrap, $justify: between, $grow: 2);
    background: map.get($colors, white) 0 0 no-repeat padding-box;
    border: 1px solid map.get($colors, light-grayish-blue);
    border-radius: 5px;
    margin: 0;
  }

  &__text {
    box-sizing: content-box;
    margin: 90px 30px;
    width: 416px;

    p {
      margin-top: 30px;
    }

    &::after {
      content: "";
      display: block;
      height: 0.25em;
      margin-top: 50px;
      width: 75%;
    }
  }

  &__image {
    position: relative;

    img {
      position: relative;
    }
  }
}